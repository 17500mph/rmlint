#!/usr/bin/env python
# encoding: utf-8

Import('env')
Import('program')


import subprocess


def run_tests(target = None, source = None, env = None) :
    Exit(subprocess.call('nosetests', env=env['ENV'], shell=True))


if 'test' in COMMAND_LINE_TARGETS:
    test_cmd = env.Command('run_tests', None, Action(run_tests, "Running tests"))
    env.AlwaysBuild(test_cmd)
    env.Depends(env.Alias('test', test_cmd), [program])
